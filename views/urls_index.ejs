<!DOCTYPE html>
<html lang="en">
  <%- include('partials/_head') %>
  <body>
    <%- include('partials/_header') %>
    <main style="margin: 1em;">
      <h3>My URLs</h3>
      <% if (user) { %>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Short URL</th>
            <th scope="col">Long URL</th>
            <th scope="col">Edit</th>
            <th scope="col">Delete</th>
          </tr>
        </thead>
        <tbody>
          <% Object.keys(urls).forEach(url => { %>
          <tr>
            <td>
              <a href="/urls/<%= url %>"> <%= url %></a>
            </td>
            <td><%= urls[url].longURL %></td>
            <td>
              <form method="GET" action="/urls/<%= url %>">
                <button type="submit" class="btn btn-outline-dark">
                  Edit
                </button>
              </form>
            </td>
            <td>
              <form
                method="POST"
                action="/urls/<%= url %>/delete?_method=DELETE"
              >
                <button type="submit" class="btn btn-outline-danger">
                  Delete
                </button>
              </form>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
      <% } else { %>
      <p>Please <a href="/login">log in</a> to see your URLs!</p>
      <% } %>
    </main>

    <%- include('partials/_footer') %>
  </body>
</html>
